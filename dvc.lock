schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data/data_ingestion.py
    deps:
    - path: src/data/data_ingestion.py
      hash: md5
      md5: d6bab5dc94b2f67c08f36bdb4a940a12
      size: 4159
    params:
      params.yaml:
        data_ingestion.test_size: 0.2
    outs:
    - path: data/raw
      hash: md5
      md5: b855e2bab4e21078d44844fee5be9da3.dir
      size: 6882906
      nfiles: 2
  data_preprocessing:
    cmd: python src/data/data_preprocessing.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 295b88d81555e67a857db0337244e118
      size: 1341252
    - path: data/raw/train.csv
      hash: md5
      md5: 70faef66e6135c49f7f02db4a55e9fdd
      size: 5541654
    - path: src/data/data_preprocessing.py
      hash: md5
      md5: 401f6a9159ab2251e9b79875f8bdec1d
      size: 3518
    outs:
    - path: data/interim
      hash: md5
      md5: a2bbccdc23dd271231099f8d5c99ff87.dir
      size: 5098055
      nfiles: 2
  feature_engineering:
    cmd: python src/features/feature_engineering.py
    deps:
    - path: data/interim/train_processed.csv
      hash: md5
      md5: 86284f4698366b0f2ee05c211c0e9453
      size: 4104889
    - path: params.yaml
      hash: md5
      md5: 6c691b6c20d727ad7379d42c47016b2f
      size: 568
    - path: src/features/feature_engineering.py
      hash: md5
      md5: c1e4b5da2fdb958d3bc0c22a81e5ff8b
      size: 4048
    params:
      params.yaml:
        feature_engineering.max_features: 5000
        feature_engineering.ngram_range:
        - 1
        - 3
    outs:
    - path: data/processed/X_train_BOW.pkl
      hash: md5
      md5: 9a4b1e1b82ffd24f7a5db5c1df382026
      size: 5186744
    - path: data/processed/bow_vectorizer.pkl
      hash: md5
      md5: 750f9856e8161b06b8abe788b671be1c
      size: 148286
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 60ae8d5a2df233794a6287641a5253ca
      size: 235633
  model_building:
    cmd: python src/model/model_building.py
    deps:
    - path: data/processed/X_train_BOW.pkl
      hash: md5
      md5: 9a4b1e1b82ffd24f7a5db5c1df382026
      size: 5186744
    - path: data/processed/bow_vectorizer.pkl
      hash: md5
      md5: 750f9856e8161b06b8abe788b671be1c
      size: 148286
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 60ae8d5a2df233794a6287641a5253ca
      size: 235633
    - path: params.yaml
      hash: md5
      md5: 6c691b6c20d727ad7379d42c47016b2f
      size: 568
    - path: src/model/model_building.py
      hash: md5
      md5: 7fc0806ec4cc60cde0acc58060db235f
      size: 4501
    params:
      params.yaml:
        model_building.lgbm_params:
          objective: multiclass
          num_class: 3
          metric: multi_logloss
          is_unbalance: true
          class_weight: balanced
          reg_alpha: 0.00034882100506868535
          reg_lambda: 0.017530902601654946
          learning_rate: 0.09972211673774413
          max_depth: 6
          n_estimators: 825
          min_child_samples: 10
    outs:
    - path: models/lgbm_Youtube_sentiment.pkl
      hash: md5
      md5: 4a747656790bc7958d7cda0434c726d8
      size: 5275078
    - path: models/model_info.json
      hash: md5
      md5: cb97b7a9cfd89df53932f52946cb14d2
      size: 100
  model_evaluation:
    cmd: python src/model/model_evaluation.py
    deps:
    - path: data/interim/test_processed.csv
      hash: md5
      md5: 5b260b8114240fb9c541c0d07b150b14
      size: 993166
    - path: data/processed/bow_vectorizer.pkl
      hash: md5
      md5: 750f9856e8161b06b8abe788b671be1c
      size: 148286
    - path: models/lgbm_Youtube_sentiment.pkl
      hash: md5
      md5: 4a747656790bc7958d7cda0434c726d8
      size: 5275078
    - path: params.yaml
      hash: md5
      md5: 6c691b6c20d727ad7379d42c47016b2f
      size: 568
    - path: src/model/model_evaluation.py
      hash: md5
      md5: 5e095f393c30edf17e1dc6d56a86a3b8
      size: 9447
    outs:
    - path: reports/classification_report.json
      hash: md5
      md5: e6d654674e0491334677da4fb2d221bc
      size: 872
    - path: reports/confusion_matrix_test_set.png
      hash: md5
      md5: 2d55cd94d1cf759a1f54bb05bc482394
      size: 22761
  model_registration:
    cmd: python src/model/register_model.py
    deps:
    - path: models/model_info.json
      hash: md5
      md5: cb97b7a9cfd89df53932f52946cb14d2
      size: 100
    - path: src/model/register_model.py
      hash: md5
      md5: 9e4a616b24c3b91feecad0b39d7e18d2
      size: 2971
